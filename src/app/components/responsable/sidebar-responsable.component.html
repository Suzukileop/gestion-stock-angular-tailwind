<nav *ngIf="isVisible" class="w-72 h-full flex flex-col justify-between pb-6 bg-white/70 dark:bg-gray-900/80 border border-gray-200 dark:border-gray-700 shadow-2xl rounded-3xl backdrop-blur-lg animate-fade-in overflow-hidden transition-all duration-500 p-4">
  <!-- Menu navigation -->
  <ul class="flex-1 flex flex-col gap-1 pt-4">
    <li *ngFor="let item of menu; let idx = index">
      <button (click)="onMenuClick(item)"
        class="group w-full flex items-center gap-3 px-3 py-3 rounded-xl text-left font-medium whitespace-nowrap text-base transition-all duration-300 bg-gradient-to-r from-transparent to-transparent focus:outline-none focus:ring-2 focus:ring-violet-400 relative overflow-hidden
        text-gray-400 dark:text-gray-500 hover:text-violet-700 dark:hover:text-violet-200 hover:bg-violet-50/80 dark:hover:bg-violet-900/40"
        [ngClass]="{
          'bg-violet-100/80 dark:bg-violet-900/60 text-violet-700 dark:text-violet-200 shadow-lg': isActive(item),
          'text-gray-400 dark:text-gray-500': !isActive(item)
        }">
        <span class="transition-transform duration-300 group-hover:scale-110 group-hover:rotate-6" [innerHTML]="getIcon(item.icon)"></span>
        <span class="whitespace-nowrap transition-colors duration-300 group-hover:text-violet-700 group-focus:text-violet-800 dark:group-hover:text-violet-200">{{ item.label }}</span>
        <span *ngIf="isActive(item)" class="absolute right-2 top-1/2 -translate-y-1/2 w-2 h-2 rounded-full bg-violet-500 animate-pulse"></span>
      </button>
    </li>
  </ul>
  <!-- Infos utilisateur et déconnexion en bas -->
  <div class="mt-8 pt-6 border-t border-gray-200 dark:border-gray-700 flex flex-col items-center w-full">
    <div class="flex flex-col items-center mb-2 w-full">
      <div class="w-16 h-16 rounded-full bg-gradient-to-br from-violet-200 to-violet-500 dark:from-violet-900 dark:to-violet-700 flex items-center justify-center text-3xl font-bold text-violet-700 dark:text-violet-200 shadow-lg mb-2 animate-fade-in">
        {{ user?.nom.charAt(0) }}{{ user?.prenom.charAt(0) }}
      </div>
      <div class="mt-1 text-base font-semibold text-gray-900 dark:text-white whitespace-nowrap">{{ user?.nom }} {{ user?.prenom }}</div>
      <div class="text-xs text-gray-500 dark:text-gray-400">Responsable</div>
    </div>
    <button (click)="onMenuClick({action: 'logout'})" class="w-full flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900 transition font-medium whitespace-nowrap text-sm mt-2 shadow hover:shadow-md focus:outline-none focus:ring-2 focus:ring-red-400 animate-fade-in max-w-full">
      Déconnexion
    </button>
  </div>
</nav>